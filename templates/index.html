<!DOCTYPE html>
<html>
  <head>
    <title>zdrct</title>
  </head>
  <body>
    <script type="text/javascript">
      const BroadcasterID = {{ .BroadcasterID }};
    </script>
    <script type="text/javascript" src="app.js"></script>
    <p id="twitch">
    {{ if .Twitch.BroadcasterID }}
      Hello, Broadcaster {{ .Twitch.BroadcasterID }}.
    {{ else }}
      Twitch API is not connected.
      <a href="{{ .Twitch.GetAuthLink "http://localhost:8666/auth" .CSRF }}" rel="noreferer nofollow noopener external">connect</a>
    {{ end }}
    </p>

    <p>
      <form method="POST" action="/rcon/config">
        RCON address: <input name="addr" value="{{ .Rcon.Addr }}" /><br />
        RCON password: <input name="password" type="password" value="{{ .Rcon.Password }}" /><br />
        <input type="submit" value="Set" />
      </form>

      <p>
        {{ if .Rcon.IsOnline }}
        online
        <form method="POST" action="/rcon">
          test: <input name="command" /> <input type="submit" value="go" />
        </form>
        {{ else }}
        offline
        {{ end }}
      </p>
    </p>

    <p>
      <ol id="rewards"></ol>
    </p>
  </body>
</html>
